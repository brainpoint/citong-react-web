{"version":3,"sources":["webpack:///game2048.js","webpack:///./Examples/2048/Game2048.js","webpack:///./Examples/2048/GameBoard.js"],"names":["webpackJsonp","0","module","exports","__webpack_require__","_classCallCheck","instance","Constructor","TypeError","_possibleConstructorReturn","self","call","ReferenceError","_inherits","subClass","superClass","prototype","Object","create","constructor","value","enumerable","writable","configurable","setPrototypeOf","__proto__","getPageXY","event","Platform","OS","touch","nativeEvent","changedTouches","pageX","pageY","_createClass","defineProperties","target","props","i","length","descriptor","defineProperty","key","protoProps","staticProps","React","AppRegistry","StyleSheet","Text","View","Animated","TouchableBounce","GameBoard","BOARD_PADDING","CELL_MARGIN","CELL_SIZE","Cell","_React$Component","this","getPrototypeOf","apply","arguments","createElement","style","styles","cell","Component","Board","_React$Component2","board","row","children","Tile","_React$Component3","_this3","tile","state","opacity","Value","top","_getPosition","toRow","left","toColumn","index","offset","isNew","timing","duration","toValue","start","parallel","tileStyles","calculateOffset","textStyles","whiteText","threeDigits","fourDigits","GameEndOverlay","_React$Component4","hasWon","hasLost","message","overlay","overlayMessage","onPress","onRestart","tryAgain","tryAgainText","Game2048","_React$Component5","_this5","startX","startY","setState","deltaX","deltaY","direction","Math","abs","move","_this6","tiles","filter","map","ref","id","container","onTouchStart","handleTouchStart","onTouchEnd","handleTouchEnd","restartGame","flex","justifyContent","alignItems","padding","backgroundColor","borderRadius","position","bottom","right","flexDirection","fontSize","marginBottom","color","fontWeight","width","height","margin","fontFamily","tile2","tile4","tile8","tile16","tile32","tile64","tile128","tile256","tile512","tile1024","tile2048","registerComponent","app","document","body","appendChild","runApplication","rootTag","424","rotateLeft","matrix","rows","columns","res","push","column","oldRow","oldColumn","markForDeletion","mergedInto","moveTo","hasMoved","fromRow","fromColumn","cells","size","addTile","addRandomTile","setPositions","won","moveLeft","hasChanged","currentRow","resultRow","targetTile","shift","tile1","forEach","rowIndex","columnIndex","fourProbability","emptyCells","r","c","floor","random","newValue","clearOldTiles","canMove","dir","newRow","newColumn"],"mappings":"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","file":"game2048.js","sourcesContent":["webpackJsonp([0],{\n\n/***/ 0:\n/***/ function(module, exports, __webpack_require__) {\n\n\t/**\n\t * The examples provided by Facebook are for non-commercial testing and\n\t * evaluation purposes only.\n\t *\n\t * Facebook reserves all rights not expressly granted.\n\t *\n\t * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n\t * OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n\t * FITNESS FOR A PARTICULAR PURPOSE AND NON INFRINGEMENT. IN NO EVENT SHALL\n\t * FACEBOOK BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN\n\t * AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN\n\t * CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.\n\t *\n\t * @providesModule Game2048\n\t * \n\t */\n\t'use strict';\n\t\n\tvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\t\n\tfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\t\n\tfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\t\n\tvar React = __webpack_require__(1);\n\tvar AppRegistry = React.AppRegistry;\n\tvar StyleSheet = React.StyleSheet;\n\tvar Text = React.Text;\n\tvar View = React.View;\n\tvar Platform = React.Platform;\n\tvar Animated = React.Animated;\n\tvar TouchableBounce = React.TouchableBounce;\n\t\n\t\n\tfunction getPageXY(event) {\n\t  if (Platform.OS == 'web') {\n\t    var touch = event.nativeEvent.changedTouches[0];\n\t    return {\n\t      pageX: touch.pageX,\n\t      pageY: touch.pageY\n\t    };\n\t  } else {\n\t    return {\n\t      pageX: event.nativeEvent.pageX,\n\t      pageY: event.nativeEvent.pageY\n\t    };\n\t  }\n\t}\n\t\n\tvar GameBoard = __webpack_require__(424);\n\t\n\tvar BOARD_PADDING = 3;\n\tvar CELL_MARGIN = 4;\n\tvar CELL_SIZE = 60;\n\t\n\tvar Cell = function (_React$Component) {\n\t  _inherits(Cell, _React$Component);\n\t\n\t  function Cell() {\n\t    _classCallCheck(this, Cell);\n\t\n\t    return _possibleConstructorReturn(this, Object.getPrototypeOf(Cell).apply(this, arguments));\n\t  }\n\t\n\t  _createClass(Cell, [{\n\t    key: 'render',\n\t    value: function render() {\n\t      return React.createElement(View, { style: styles.cell });\n\t    }\n\t  }]);\n\t\n\t  return Cell;\n\t}(React.Component);\n\t\n\tvar Board = function (_React$Component2) {\n\t  _inherits(Board, _React$Component2);\n\t\n\t  function Board() {\n\t    _classCallCheck(this, Board);\n\t\n\t    return _possibleConstructorReturn(this, Object.getPrototypeOf(Board).apply(this, arguments));\n\t  }\n\t\n\t  _createClass(Board, [{\n\t    key: 'render',\n\t    value: function render() {\n\t      return React.createElement(\n\t        View,\n\t        { style: styles.board },\n\t        React.createElement(\n\t          View,\n\t          { style: styles.row },\n\t          React.createElement(Cell, null),\n\t          React.createElement(Cell, null),\n\t          React.createElement(Cell, null),\n\t          React.createElement(Cell, null)\n\t        ),\n\t        React.createElement(\n\t          View,\n\t          { style: styles.row },\n\t          React.createElement(Cell, null),\n\t          React.createElement(Cell, null),\n\t          React.createElement(Cell, null),\n\t          React.createElement(Cell, null)\n\t        ),\n\t        React.createElement(\n\t          View,\n\t          { style: styles.row },\n\t          React.createElement(Cell, null),\n\t          React.createElement(Cell, null),\n\t          React.createElement(Cell, null),\n\t          React.createElement(Cell, null)\n\t        ),\n\t        React.createElement(\n\t          View,\n\t          { style: styles.row },\n\t          React.createElement(Cell, null),\n\t          React.createElement(Cell, null),\n\t          React.createElement(Cell, null),\n\t          React.createElement(Cell, null)\n\t        ),\n\t        this.props.children\n\t      );\n\t    }\n\t  }]);\n\t\n\t  return Board;\n\t}(React.Component);\n\t\n\tvar Tile = function (_React$Component3) {\n\t  _inherits(Tile, _React$Component3);\n\t\n\t  _createClass(Tile, null, [{\n\t    key: '_getPosition',\n\t    value: function _getPosition(index) {\n\t      return BOARD_PADDING + (index * (CELL_SIZE + CELL_MARGIN * 2) + CELL_MARGIN);\n\t    }\n\t  }]);\n\t\n\t  function Tile(props) {\n\t    _classCallCheck(this, Tile);\n\t\n\t    var _this3 = _possibleConstructorReturn(this, Object.getPrototypeOf(Tile).call(this, props));\n\t\n\t    var tile = _this3.props.tile;\n\t\n\t    _this3.state = {\n\t      opacity: new Animated.Value(0),\n\t      top: new Animated.Value(Tile._getPosition(tile.toRow())),\n\t      left: new Animated.Value(Tile._getPosition(tile.toColumn()))\n\t    };\n\t    return _this3;\n\t  }\n\t\n\t  _createClass(Tile, [{\n\t    key: 'calculateOffset',\n\t    value: function calculateOffset() {\n\t      var tile = this.props.tile;\n\t\n\t      var offset = {\n\t        top: this.state.top,\n\t        left: this.state.left,\n\t        opacity: this.state.opacity\n\t      };\n\t\n\t      if (tile.isNew()) {\n\t        Animated.timing(this.state.opacity, {\n\t          duration: 100,\n\t          toValue: 1\n\t        }).start();\n\t      } else {\n\t        Animated.parallel([Animated.timing(offset.top, {\n\t          duration: 100,\n\t          toValue: Tile._getPosition(tile.toRow())\n\t        }), Animated.timing(offset.left, {\n\t          duration: 100,\n\t          toValue: Tile._getPosition(tile.toColumn())\n\t        })]).start();\n\t      }\n\t      return offset;\n\t    }\n\t  }, {\n\t    key: 'render',\n\t    value: function render() {\n\t      var tile = this.props.tile;\n\t\n\t      var tileStyles = [styles.tile, styles['tile' + tile.value], this.calculateOffset()];\n\t\n\t      var textStyles = [styles.value, tile.value > 4 && styles.whiteText, tile.value > 100 && styles.threeDigits, tile.value > 1000 && styles.fourDigits];\n\t\n\t      return React.createElement(\n\t        Animated.View,\n\t        { style: tileStyles },\n\t        React.createElement(\n\t          Text,\n\t          { style: textStyles },\n\t          tile.value\n\t        )\n\t      );\n\t    }\n\t  }]);\n\t\n\t  return Tile;\n\t}(React.Component);\n\t\n\tvar GameEndOverlay = function (_React$Component4) {\n\t  _inherits(GameEndOverlay, _React$Component4);\n\t\n\t  function GameEndOverlay() {\n\t    _classCallCheck(this, GameEndOverlay);\n\t\n\t    return _possibleConstructorReturn(this, Object.getPrototypeOf(GameEndOverlay).apply(this, arguments));\n\t  }\n\t\n\t  _createClass(GameEndOverlay, [{\n\t    key: 'render',\n\t    value: function render() {\n\t      var board = this.props.board;\n\t\n\t      if (!board.hasWon() && !board.hasLost()) {\n\t        return React.createElement(View, null);\n\t      }\n\t\n\t      var message = board.hasWon() ? 'Good Job!' : 'Game Over';\n\t\n\t      return React.createElement(\n\t        View,\n\t        { style: styles.overlay },\n\t        React.createElement(\n\t          Text,\n\t          { style: styles.overlayMessage },\n\t          message\n\t        ),\n\t        React.createElement(\n\t          TouchableBounce,\n\t          { onPress: this.props.onRestart, style: styles.tryAgain },\n\t          React.createElement(\n\t            Text,\n\t            { style: styles.tryAgainText },\n\t            'Try Again?'\n\t          )\n\t        )\n\t      );\n\t    }\n\t  }]);\n\t\n\t  return GameEndOverlay;\n\t}(React.Component);\n\t\n\tvar Game2048 = function (_React$Component5) {\n\t  _inherits(Game2048, _React$Component5);\n\t\n\t  function Game2048(props) {\n\t    _classCallCheck(this, Game2048);\n\t\n\t    var _this5 = _possibleConstructorReturn(this, Object.getPrototypeOf(Game2048).call(this, props));\n\t\n\t    _this5.state = {\n\t      board: new GameBoard()\n\t    };\n\t    _this5.startX = 0;\n\t    _this5.startY = 0;\n\t    return _this5;\n\t  }\n\t\n\t  _createClass(Game2048, [{\n\t    key: 'restartGame',\n\t    value: function restartGame() {\n\t      this.setState({ board: new GameBoard() });\n\t    }\n\t  }, {\n\t    key: 'handleTouchStart',\n\t    value: function handleTouchStart(event) {\n\t      if (this.state.board.hasWon()) {\n\t        return;\n\t      }\n\t\n\t      var touch = getPageXY(event);\n\t      this.startX = touch.pageX;\n\t      this.startY = touch.pageY;\n\t    }\n\t  }, {\n\t    key: 'handleTouchEnd',\n\t    value: function handleTouchEnd(event) {\n\t      if (this.state.board.hasWon()) {\n\t        return;\n\t      }\n\t\n\t      var touch = getPageXY(event);\n\t      var deltaX = touch.pageX - this.startX;\n\t      var deltaY = touch.pageY - this.startY;\n\t\n\t      var direction = -1;\n\t      if (Math.abs(deltaX) > 3 * Math.abs(deltaY) && Math.abs(deltaX) > 30) {\n\t        direction = deltaX > 0 ? 2 : 0;\n\t      } else if (Math.abs(deltaY) > 3 * Math.abs(deltaX) && Math.abs(deltaY) > 30) {\n\t        direction = deltaY > 0 ? 3 : 1;\n\t      }\n\t\n\t      if (direction !== -1) {\n\t        this.setState({ board: this.state.board.move(direction) });\n\t      }\n\t    }\n\t  }, {\n\t    key: 'render',\n\t    value: function render() {\n\t      var _this6 = this;\n\t\n\t      var tiles = this.state.board.tiles.filter(function (tile) {\n\t        return tile.value;\n\t      }).map(function (tile) {\n\t        return React.createElement(Tile, { ref: tile.id, key: tile.id, tile: tile });\n\t      });\n\t\n\t      return React.createElement(\n\t        View,\n\t        {\n\t          style: styles.container,\n\t          onTouchStart: function onTouchStart(event) {\n\t            return _this6.handleTouchStart(event);\n\t          },\n\t          onTouchEnd: function onTouchEnd(event) {\n\t            return _this6.handleTouchEnd(event);\n\t          } },\n\t        React.createElement(\n\t          Board,\n\t          null,\n\t          tiles\n\t        ),\n\t        React.createElement(GameEndOverlay, { board: this.state.board, onRestart: function onRestart() {\n\t            return _this6.restartGame();\n\t          } })\n\t      );\n\t    }\n\t  }]);\n\t\n\t  return Game2048;\n\t}(React.Component);\n\t\n\tvar styles = StyleSheet.create({\n\t  container: {\n\t    flex: 1,\n\t    justifyContent: 'center',\n\t    alignItems: 'center'\n\t  },\n\t  board: {\n\t    padding: BOARD_PADDING,\n\t    backgroundColor: '#bbaaaa',\n\t    borderRadius: 5\n\t  },\n\t  overlay: {\n\t    position: 'absolute',\n\t    top: 0,\n\t    bottom: 0,\n\t    left: 0,\n\t    right: 0,\n\t    backgroundColor: 'rgba(221, 221, 221, 0.5)',\n\t    flex: 1,\n\t    flexDirection: 'column',\n\t    justifyContent: 'center',\n\t    alignItems: 'center'\n\t  },\n\t  overlayMessage: {\n\t    fontSize: 40,\n\t    marginBottom: 20\n\t  },\n\t  tryAgain: {\n\t    backgroundColor: '#887766',\n\t    padding: 20,\n\t    borderRadius: 5\n\t  },\n\t  tryAgainText: {\n\t    color: '#ffffff',\n\t    fontSize: 20,\n\t    fontWeight: '500'\n\t  },\n\t  cell: {\n\t    width: CELL_SIZE,\n\t    height: CELL_SIZE,\n\t    borderRadius: 5,\n\t    backgroundColor: '#ddccbb',\n\t    margin: CELL_MARGIN\n\t  },\n\t  row: {\n\t    flexDirection: 'row'\n\t  },\n\t  tile: {\n\t    position: 'absolute',\n\t    width: CELL_SIZE,\n\t    height: CELL_SIZE,\n\t    backgroundColor: '#ddccbb',\n\t    borderRadius: 5,\n\t    flex: 1,\n\t    justifyContent: 'center',\n\t    alignItems: 'center'\n\t  },\n\t  value: {\n\t    fontSize: 24,\n\t    color: '#776666',\n\t    fontFamily: 'Verdana',\n\t    fontWeight: '500'\n\t  },\n\t  tile2: {\n\t    backgroundColor: '#eeeeee'\n\t  },\n\t  tile4: {\n\t    backgroundColor: '#eeeecc'\n\t  },\n\t  tile8: {\n\t    backgroundColor: '#ffbb88'\n\t  },\n\t  tile16: {\n\t    backgroundColor: '#ff9966'\n\t  },\n\t  tile32: {\n\t    backgroundColor: '#ff7755'\n\t  },\n\t  tile64: {\n\t    backgroundColor: '#ff5533'\n\t  },\n\t  tile128: {\n\t    backgroundColor: '#eecc77'\n\t  },\n\t  tile256: {\n\t    backgroundColor: '#eecc66'\n\t  },\n\t  tile512: {\n\t    backgroundColor: '#eecc55'\n\t  },\n\t  tile1024: {\n\t    backgroundColor: '#eecc33'\n\t  },\n\t  tile2048: {\n\t    backgroundColor: '#eecc22'\n\t  },\n\t  whiteText: {\n\t    color: '#ffffff'\n\t  },\n\t  threeDigits: {\n\t    fontSize: 20\n\t  },\n\t  fourDigits: {\n\t    fontSize: 18\n\t  }\n\t});\n\t\n\tAppRegistry.registerComponent('Game2048', function () {\n\t  return Game2048;\n\t});\n\t\n\tif (Platform.OS == 'web') {\n\t  var app = document.createElement('div');\n\t  document.body.appendChild(app);\n\t\n\t  AppRegistry.runApplication('Game2048', {\n\t    rootTag: app\n\t  });\n\t}\n\t\n\tmodule.exports = Game2048;\n\n/***/ },\n\n/***/ 424:\n/***/ function(module, exports) {\n\n\t/**\n\t * The examples provided by Facebook are for non-commercial testing and\n\t * evaluation purposes only.\n\t *\n\t * Facebook reserves all rights not expressly granted.\n\t *\n\t * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n\t * OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n\t * FITNESS FOR A PARTICULAR PURPOSE AND NON INFRINGEMENT. IN NO EVENT SHALL\n\t * FACEBOOK BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN\n\t * AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN\n\t * CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.\n\t *\n\t * @providesModule GameBoard\n\t * \n\t */\n\t'use strict';\n\t\n\t// NB: Taken straight from: https://github.com/IvanVergiliev/2048-react/blob/master/src/board.js\n\t//     with no modificiation except to format it for CommonJS and fix lint/flow errors\n\t\n\tvar rotateLeft = function rotateLeft(matrix) {\n\t  var rows = matrix.length;\n\t  var columns = matrix[0].length;\n\t  var res = [];\n\t  for (var row = 0; row < rows; ++row) {\n\t    res.push([]);\n\t    for (var column = 0; column < columns; ++column) {\n\t      res[row][column] = matrix[column][columns - row - 1];\n\t    }\n\t  }\n\t  return res;\n\t};\n\t\n\tvar Tile = function Tile(value, row, column) {\n\t  this.value = value || 0;\n\t  this.row = row || -1;\n\t\n\t  this.column = column || -1;\n\t  this.oldRow = -1;\n\t  this.oldColumn = -1;\n\t  this.markForDeletion = false;\n\t  this.mergedInto = null;\n\t  this.id = Tile.id++;\n\t};\n\t\n\tTile.id = 0;\n\t\n\tTile.prototype.moveTo = function (row, column) {\n\t  this.oldRow = this.row;\n\t  this.oldColumn = this.column;\n\t  this.row = row;\n\t  this.column = column;\n\t};\n\t\n\tTile.prototype.isNew = function () {\n\t  return this.oldRow === -1 && !this.mergedInto;\n\t};\n\t\n\tTile.prototype.hasMoved = function () {\n\t  return this.fromRow() !== -1 && (this.fromRow() !== this.toRow() || this.fromColumn() !== this.toColumn()) || this.mergedInto;\n\t};\n\t\n\tTile.prototype.fromRow = function () {\n\t  return this.mergedInto ? this.row : this.oldRow;\n\t};\n\t\n\tTile.prototype.fromColumn = function () {\n\t  return this.mergedInto ? this.column : this.oldColumn;\n\t};\n\t\n\tTile.prototype.toRow = function () {\n\t  return this.mergedInto ? this.mergedInto.row : this.row;\n\t};\n\t\n\tTile.prototype.toColumn = function () {\n\t  return this.mergedInto ? this.mergedInto.column : this.column;\n\t};\n\t\n\tvar Board = function Board() {\n\t  this.tiles = [];\n\t  this.cells = [];\n\t  for (var i = 0; i < Board.size; ++i) {\n\t    this.cells[i] = [this.addTile(), this.addTile(), this.addTile(), this.addTile()];\n\t  }\n\t  this.addRandomTile();\n\t  this.setPositions();\n\t  this.won = false;\n\t};\n\t\n\tBoard.prototype.addTile = function () {\n\t  var res = new Tile();\n\t  Tile.apply(res, arguments);\n\t  this.tiles.push(res);\n\t  return res;\n\t};\n\t\n\tBoard.size = 4;\n\t\n\tBoard.prototype.moveLeft = function () {\n\t  var hasChanged = false;\n\t  for (var row = 0; row < Board.size; ++row) {\n\t    var currentRow = this.cells[row].filter(function (tile) {\n\t      return tile.value !== 0;\n\t    });\n\t    var resultRow = [];\n\t    for (var target = 0; target < Board.size; ++target) {\n\t      var targetTile = currentRow.length ? currentRow.shift() : this.addTile();\n\t      if (currentRow.length > 0 && currentRow[0].value === targetTile.value) {\n\t        var tile1 = targetTile;\n\t        targetTile = this.addTile(targetTile.value);\n\t        tile1.mergedInto = targetTile;\n\t        var tile2 = currentRow.shift();\n\t        tile2.mergedInto = targetTile;\n\t        targetTile.value += tile2.value;\n\t      }\n\t      resultRow[target] = targetTile;\n\t      this.won = this.won || targetTile.value === 2048;\n\t      hasChanged = hasChanged || targetTile.value !== this.cells[row][target].value;\n\t    }\n\t    this.cells[row] = resultRow;\n\t  }\n\t  return hasChanged;\n\t};\n\t\n\tBoard.prototype.setPositions = function () {\n\t  this.cells.forEach(function (row, rowIndex) {\n\t    row.forEach(function (tile, columnIndex) {\n\t      tile.oldRow = tile.row;\n\t      tile.oldColumn = tile.column;\n\t      tile.row = rowIndex;\n\t      tile.column = columnIndex;\n\t      tile.markForDeletion = false;\n\t    });\n\t  });\n\t};\n\t\n\tBoard.fourProbability = 0.1;\n\t\n\tBoard.prototype.addRandomTile = function () {\n\t  var emptyCells = [];\n\t  for (var r = 0; r < Board.size; ++r) {\n\t    for (var c = 0; c < Board.size; ++c) {\n\t      if (this.cells[r][c].value === 0) {\n\t        emptyCells.push({ r: r, c: c });\n\t      }\n\t    }\n\t  }\n\t  var index = Math.floor(Math.random() * emptyCells.length);\n\t  var cell = emptyCells[index];\n\t  var newValue = Math.random() < Board.fourProbability ? 4 : 2;\n\t  this.cells[cell.r][cell.c] = this.addTile(newValue);\n\t};\n\t\n\tBoard.prototype.move = function (direction) {\n\t  // 0 -> left, 1 -> up, 2 -> right, 3 -> down\n\t  this.clearOldTiles();\n\t  for (var i = 0; i < direction; ++i) {\n\t    this.cells = rotateLeft(this.cells);\n\t  }\n\t  var hasChanged = this.moveLeft();\n\t  for (var i = direction; i < 4; ++i) {\n\t    this.cells = rotateLeft(this.cells);\n\t  }\n\t  if (hasChanged) {\n\t    this.addRandomTile();\n\t  }\n\t  this.setPositions();\n\t  return this;\n\t};\n\t\n\tBoard.prototype.clearOldTiles = function () {\n\t  this.tiles = this.tiles.filter(function (tile) {\n\t    return tile.markForDeletion === false;\n\t  });\n\t  this.tiles.forEach(function (tile) {\n\t    tile.markForDeletion = true;\n\t  });\n\t};\n\t\n\tBoard.prototype.hasWon = function () {\n\t  return this.won;\n\t};\n\t\n\tBoard.deltaX = [-1, 0, 1, 0];\n\tBoard.deltaY = [0, -1, 0, 1];\n\t\n\tBoard.prototype.hasLost = function () {\n\t  var canMove = false;\n\t  for (var row = 0; row < Board.size; ++row) {\n\t    for (var column = 0; column < Board.size; ++column) {\n\t      canMove = canMove || this.cells[row][column].value === 0;\n\t      for (var dir = 0; dir < 4; ++dir) {\n\t        var newRow = row + Board.deltaX[dir];\n\t        var newColumn = column + Board.deltaY[dir];\n\t        if (newRow < 0 || newRow >= Board.size || newColumn < 0 || newColumn >= Board.size) {\n\t          continue;\n\t        }\n\t        canMove = canMove || this.cells[row][column].value === this.cells[newRow][newColumn].value;\n\t      }\n\t    }\n\t  }\n\t  return !canMove;\n\t};\n\t\n\tmodule.exports = Board;\n\n/***/ }\n\n});\n\n\n/** WEBPACK FOOTER **\n ** game2048.js\n **/","/**\n * The examples provided by Facebook are for non-commercial testing and\n * evaluation purposes only.\n *\n * Facebook reserves all rights not expressly granted.\n *\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n * OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n * FITNESS FOR A PARTICULAR PURPOSE AND NON INFRINGEMENT. IN NO EVENT SHALL\n * FACEBOOK BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN\n * AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN\n * CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.\n *\n * @providesModule Game2048\n * @flow\n */\n'use strict';\n\nvar React = require('react-native');\nvar {\n  AppRegistry,\n  StyleSheet,\n  Text,\n  View,\n  Platform,\n  Animated,\n  TouchableBounce,\n} = React;\n\nfunction getPageXY(event){\n  if (Platform.OS == 'web') {\n    var touch = event.nativeEvent.changedTouches[0];\n    return {\n      pageX: touch.pageX,\n      pageY: touch.pageY\n    }\n  } else {\n    return {\n      pageX: event.nativeEvent.pageX,\n      pageY: event.nativeEvent.pageY\n    }\n  }\n}\n\nvar GameBoard = require('GameBoard');\n\nvar BOARD_PADDING = 3;\nvar CELL_MARGIN = 4;\nvar CELL_SIZE = 60;\n\nclass Cell extends React.Component {\n  render() {\n    return <View style={styles.cell} />;\n  }\n}\n\nclass Board extends React.Component {\n  render() {\n    return (\n      <View style={styles.board}>\n        <View style={styles.row}><Cell/><Cell/><Cell/><Cell/></View>\n        <View style={styles.row}><Cell/><Cell/><Cell/><Cell/></View>\n        <View style={styles.row}><Cell/><Cell/><Cell/><Cell/></View>\n        <View style={styles.row}><Cell/><Cell/><Cell/><Cell/></View>\n        {this.props.children}\n      </View>\n    );\n  }\n}\n\nclass Tile extends React.Component {\n  static _getPosition(index): number {\n    return BOARD_PADDING + (index * (CELL_SIZE + CELL_MARGIN * 2) + CELL_MARGIN);\n  }\n\n  constructor(props: {}) {\n    super(props);\n\n    var tile = this.props.tile;\n\n    this.state = {\n      opacity: new Animated.Value(0),\n      top: new Animated.Value(Tile._getPosition(tile.toRow())),\n      left: new Animated.Value(Tile._getPosition(tile.toColumn())),\n    };\n  }\n\n  calculateOffset(): {top: number; left: number; opacity: number} {\n    var tile = this.props.tile;\n\n    var offset = {\n      top: this.state.top,\n      left: this.state.left,\n      opacity: this.state.opacity,\n    };\n\n    if (tile.isNew()) {\n      Animated.timing(this.state.opacity, {\n        duration: 100,\n        toValue: 1,\n      }).start();\n    } else {\n      Animated.parallel([\n        Animated.timing(offset.top, {\n          duration: 100,\n          toValue: Tile._getPosition(tile.toRow()),\n        }),\n        Animated.timing(offset.left, {\n          duration: 100,\n          toValue: Tile._getPosition(tile.toColumn()),\n        }),\n      ]).start();\n    }\n    return offset;\n  }\n\n  render() {\n    var tile = this.props.tile;\n\n    var tileStyles = [\n      styles.tile,\n      styles['tile' + tile.value],\n      this.calculateOffset(),\n    ];\n\n    var textStyles = [\n      styles.value,\n      tile.value > 4 && styles.whiteText,\n      tile.value > 100 && styles.threeDigits,\n      tile.value > 1000 && styles.fourDigits,\n    ];\n\n    return (\n      <Animated.View style={tileStyles}>\n        <Text style={textStyles}>{tile.value}</Text>\n      </Animated.View>\n    );\n  }\n}\n\nclass GameEndOverlay extends React.Component {\n  render() {\n    var board = this.props.board;\n\n    if (!board.hasWon() && !board.hasLost()) {\n      return <View/>;\n    }\n\n    var message = board.hasWon() ?\n      'Good Job!' : 'Game Over';\n\n    return (\n      <View style={styles.overlay}>\n        <Text style={styles.overlayMessage}>{message}</Text>\n        <TouchableBounce onPress={this.props.onRestart} style={styles.tryAgain}>\n          <Text style={styles.tryAgainText}>Try Again?</Text>\n        </TouchableBounce>\n      </View>\n    );\n  }\n}\n\nclass Game2048 extends React.Component {\n  startX: number;\n  startY: number;\n\n  constructor(props: {}) {\n    super(props);\n    this.state = {\n      board: new GameBoard(),\n    };\n    this.startX = 0;\n    this.startY = 0;\n  }\n\n  restartGame() {\n    this.setState({board: new GameBoard()});\n  }\n\n  handleTouchStart(event: Object) {\n    if (this.state.board.hasWon()) {\n      return;\n    }\n\n    var touch = getPageXY(event);\n    this.startX = touch.pageX;\n    this.startY = touch.pageY;\n\n  }\n\n  handleTouchEnd(event: Object) {\n    if (this.state.board.hasWon()) {\n      return;\n    }\n\n    var touch = getPageXY(event);\n    var deltaX = touch.pageX - this.startX;\n    var deltaY = touch.pageY - this.startY;\n\n    var direction = -1;\n    if (Math.abs(deltaX) > 3 * Math.abs(deltaY) && Math.abs(deltaX) > 30) {\n      direction = deltaX > 0 ? 2 : 0;\n    } else if (Math.abs(deltaY) > 3 * Math.abs(deltaX) && Math.abs(deltaY) > 30) {\n      direction = deltaY > 0 ? 3 : 1;\n    }\n\n    if (direction !== -1) {\n      this.setState({board: this.state.board.move(direction)});\n    }\n  }\n\n  render() {\n    var tiles = this.state.board.tiles\n      .filter((tile) => tile.value)\n      .map((tile) => <Tile ref={tile.id} key={tile.id} tile={tile} />);\n\n    return (\n      <View\n        style={styles.container}\n        onTouchStart={(event) => this.handleTouchStart(event)}\n        onTouchEnd={(event) => this.handleTouchEnd(event)}>\n        <Board>\n          {tiles}\n        </Board>\n        <GameEndOverlay board={this.state.board} onRestart={() => this.restartGame()} />\n      </View>\n    );\n  }\n}\n\nvar styles = StyleSheet.create({\n  container: {\n    flex: 1,\n    justifyContent: 'center',\n    alignItems: 'center',\n  },\n  board: {\n    padding: BOARD_PADDING,\n    backgroundColor: '#bbaaaa',\n    borderRadius: 5,\n  },\n  overlay: {\n    position: 'absolute',\n    top: 0,\n    bottom: 0,\n    left: 0,\n    right: 0,\n    backgroundColor: 'rgba(221, 221, 221, 0.5)',\n    flex: 1,\n    flexDirection: 'column',\n    justifyContent: 'center',\n    alignItems: 'center',\n  },\n  overlayMessage: {\n    fontSize: 40,\n    marginBottom: 20,\n  },\n  tryAgain: {\n    backgroundColor: '#887766',\n    padding: 20,\n    borderRadius: 5,\n  },\n  tryAgainText: {\n    color: '#ffffff',\n    fontSize: 20,\n    fontWeight: '500',\n  },\n  cell: {\n    width: CELL_SIZE,\n    height: CELL_SIZE,\n    borderRadius: 5,\n    backgroundColor: '#ddccbb',\n    margin: CELL_MARGIN,\n  },\n  row: {\n    flexDirection: 'row',\n  },\n  tile: {\n    position: 'absolute',\n    width: CELL_SIZE,\n    height: CELL_SIZE,\n    backgroundColor: '#ddccbb',\n    borderRadius: 5,\n    flex: 1,\n    justifyContent: 'center',\n    alignItems: 'center',\n  },\n  value: {\n    fontSize: 24,\n    color: '#776666',\n    fontFamily: 'Verdana',\n    fontWeight: '500',\n  },\n  tile2: {\n    backgroundColor: '#eeeeee',\n  },\n  tile4: {\n    backgroundColor: '#eeeecc',\n  },\n  tile8: {\n    backgroundColor: '#ffbb88',\n  },\n  tile16: {\n    backgroundColor: '#ff9966',\n  },\n  tile32: {\n    backgroundColor: '#ff7755',\n  },\n  tile64: {\n    backgroundColor: '#ff5533',\n  },\n  tile128: {\n    backgroundColor: '#eecc77',\n  },\n  tile256: {\n    backgroundColor: '#eecc66',\n  },\n  tile512: {\n    backgroundColor: '#eecc55',\n  },\n  tile1024: {\n    backgroundColor: '#eecc33',\n  },\n  tile2048: {\n    backgroundColor: '#eecc22',\n  },\n  whiteText: {\n    color: '#ffffff',\n  },\n  threeDigits: {\n    fontSize: 20,\n  },\n  fourDigits: {\n    fontSize: 18,\n  },\n});\n\nAppRegistry.registerComponent('Game2048', () => Game2048);\n\nif(Platform.OS == 'web'){\n  var app = document.createElement('div');\n  document.body.appendChild(app);\n\n  AppRegistry.runApplication('Game2048', {\n    rootTag: app\n  })\n}\n\nmodule.exports = Game2048;\n\n\n\n/** WEBPACK FOOTER **\n ** ./Examples/2048/Game2048.js\n **/","/**\n * The examples provided by Facebook are for non-commercial testing and\n * evaluation purposes only.\n *\n * Facebook reserves all rights not expressly granted.\n *\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n * OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n * FITNESS FOR A PARTICULAR PURPOSE AND NON INFRINGEMENT. IN NO EVENT SHALL\n * FACEBOOK BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN\n * AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN\n * CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.\n *\n * @providesModule GameBoard\n * @flow\n */\n'use strict';\n\n// NB: Taken straight from: https://github.com/IvanVergiliev/2048-react/blob/master/src/board.js\n//     with no modificiation except to format it for CommonJS and fix lint/flow errors\n\nvar rotateLeft = function (matrix) {\n  var rows = matrix.length;\n  var columns = matrix[0].length;\n  var res = [];\n  for (var row = 0; row < rows; ++row) {\n    res.push([]);\n    for (var column = 0; column < columns; ++column) {\n      res[row][column] = matrix[column][columns - row - 1];\n    }\n  }\n  return res;\n};\n\nvar Tile = function (value?: number, row?: number, column?: number) {\n  this.value = value || 0;\n  this.row = row || -1;\n\n  this.column = column || -1;\n  this.oldRow = -1;\n  this.oldColumn = -1;\n  this.markForDeletion = false;\n  this.mergedInto = null;\n  this.id = Tile.id++;\n};\n\nTile.id = 0;\n\nTile.prototype.moveTo = function (row, column) {\n  this.oldRow = this.row;\n  this.oldColumn = this.column;\n  this.row = row;\n  this.column = column;\n};\n\nTile.prototype.isNew = function () {\n  return this.oldRow === -1 && !this.mergedInto;\n};\n\nTile.prototype.hasMoved = function () {\n  return (this.fromRow() !== -1 && (this.fromRow() !== this.toRow() || this.fromColumn() !== this.toColumn())) ||\n    this.mergedInto;\n};\n\nTile.prototype.fromRow = function () {\n  return this.mergedInto ? this.row : this.oldRow;\n};\n\nTile.prototype.fromColumn = function () {\n  return this.mergedInto ? this.column : this.oldColumn;\n};\n\nTile.prototype.toRow = function () {\n  return this.mergedInto ? this.mergedInto.row : this.row;\n};\n\nTile.prototype.toColumn = function () {\n  return this.mergedInto ? this.mergedInto.column : this.column;\n};\n\nvar Board = function () {\n  this.tiles = [];\n  this.cells = [];\n  for (var i = 0; i < Board.size; ++i) {\n    this.cells[i] = [this.addTile(), this.addTile(), this.addTile(), this.addTile()];\n  }\n  this.addRandomTile();\n  this.setPositions();\n  this.won = false;\n};\n\nBoard.prototype.addTile = function () {\n  var res = new Tile();\n  Tile.apply(res, arguments);\n  this.tiles.push(res);\n  return res;\n};\n\nBoard.size = 4;\n\nBoard.prototype.moveLeft = function () {\n  var hasChanged = false;\n  for (var row = 0; row < Board.size; ++row) {\n    var currentRow = this.cells[row].filter(function (tile) { return tile.value !== 0; });\n    var resultRow = [];\n    for (var target = 0; target < Board.size; ++target) {\n      var targetTile = currentRow.length ? currentRow.shift() : this.addTile();\n      if (currentRow.length > 0 && currentRow[0].value === targetTile.value) {\n        var tile1 = targetTile;\n        targetTile = this.addTile(targetTile.value);\n        tile1.mergedInto = targetTile;\n        var tile2 = currentRow.shift();\n        tile2.mergedInto = targetTile;\n        targetTile.value += tile2.value;\n      }\n      resultRow[target] = targetTile;\n      this.won = this.won || (targetTile.value === 2048);\n      hasChanged = hasChanged || (targetTile.value !== this.cells[row][target].value);\n    }\n    this.cells[row] = resultRow;\n  }\n  return hasChanged;\n};\n\nBoard.prototype.setPositions = function () {\n  this.cells.forEach(function (row, rowIndex) {\n    row.forEach(function (tile, columnIndex) {\n      tile.oldRow = tile.row;\n      tile.oldColumn = tile.column;\n      tile.row = rowIndex;\n      tile.column = columnIndex;\n      tile.markForDeletion = false;\n    });\n  });\n};\n\nBoard.fourProbability = 0.1;\n\nBoard.prototype.addRandomTile = function () {\n  var emptyCells = [];\n  for (var r = 0; r < Board.size; ++r) {\n    for (var c = 0; c < Board.size; ++c) {\n      if (this.cells[r][c].value === 0) {\n        emptyCells.push({r: r, c: c});\n      }\n    }\n  }\n  var index = Math.floor(Math.random() * emptyCells.length);\n  var cell = emptyCells[index];\n  var newValue = Math.random() < Board.fourProbability ? 4 : 2;\n  this.cells[cell.r][cell.c] = this.addTile(newValue);\n};\n\nBoard.prototype.move = function (direction) {\n  // 0 -> left, 1 -> up, 2 -> right, 3 -> down\n  this.clearOldTiles();\n  for (var i = 0; i < direction; ++i) {\n    this.cells = rotateLeft(this.cells);\n  }\n  var hasChanged = this.moveLeft();\n  for (var i = direction; i < 4; ++i) {\n    this.cells = rotateLeft(this.cells);\n  }\n  if (hasChanged) {\n    this.addRandomTile();\n  }\n  this.setPositions();\n  return this;\n};\n\nBoard.prototype.clearOldTiles = function () {\n  this.tiles = this.tiles.filter(function (tile) { return tile.markForDeletion === false; });\n  this.tiles.forEach(function (tile) { tile.markForDeletion = true; });\n};\n\nBoard.prototype.hasWon = function () {\n  return this.won;\n};\n\nBoard.deltaX = [-1, 0, 1, 0];\nBoard.deltaY = [0, -1, 0, 1];\n\nBoard.prototype.hasLost = function () {\n  var canMove = false;\n  for (var row = 0; row < Board.size; ++row) {\n    for (var column = 0; column < Board.size; ++column) {\n      canMove = canMove || (this.cells[row][column].value === 0);\n      for (var dir = 0; dir < 4; ++dir) {\n        var newRow = row + Board.deltaX[dir];\n        var newColumn = column + Board.deltaY[dir];\n        if (newRow < 0 || newRow >= Board.size || newColumn < 0 || newColumn >= Board.size) {\n          continue;\n        }\n        canMove = canMove || (this.cells[row][column].value === this.cells[newRow][newColumn].value);\n      }\n    }\n  }\n  return !canMove;\n};\n\nmodule.exports = Board;\n\n\n\n/** WEBPACK FOOTER **\n ** ./Examples/2048/GameBoard.js\n **/"],"sourceRoot":""}